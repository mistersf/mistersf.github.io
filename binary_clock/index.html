<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Clock</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>Binary Clock Explorer</h1>
    <nav>
        <a>Binary Clock Explorer</a>
        <a href="./game.html">Binary Clock Game</a>
    </nav>
    <div id="binary-clock">
        <table>
            <tr>
                <th>32</th>
                <th>16</th>
                <th>8</th>
                <th>4</th>
                <th>2</th>
                <th>1</th>
                <th>sum</th>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </div>
    <div id="decimal-clock">
        Decimal Time:
        <input type="number" id="decimal-hours" min="0" max="23" value="0"> :
        <input type="number" id="decimal-minutes" min="0" max="59" value="0"> :
        <input type="number" id="decimal-seconds" min="0" max="59" value="0">
        <button type="reset" disabled>Reset to current time</button>
    </div>
    <input type="checkbox" name="details" id="details-toggle">
    <label for="details-toggle"> Show Place Values</label>
    <script>
        const binaryTable = document.querySelector('#binary-clock table');
        const decimalHoursInput = document.getElementById('decimal-hours');
        const decimalMinutesInput = document.getElementById('decimal-minutes');
        const decimalSecondsInput = document.getElementById('decimal-seconds');
        const resetButton = document.querySelector('button[type="reset"]');
        let pause = false;
        let customTime = { h: 0, m: 0, s: 0 };
        function updateBinaryClock() {
            let detailsVisible = document.getElementById('details-toggle').checked;
            const now = new Date();
            let h = now.getHours();
            let m = now.getMinutes();
            let s = now.getSeconds();
            if (pause) {
                h = customTime.h;
                m = customTime.m;
                s = customTime.s;
            }
            for (let i = 0; i < 6; i++) {
                const bitValue = 1 << (5 - i);
                const hOn = (h & bitValue);
                const mOn = (m & bitValue);
                const sOn = (s & bitValue);
                binaryTable.rows[1].cells[i].style.backgroundColor = hOn ? '#00aaff' : 'slategray';
                binaryTable.rows[2].cells[i].style.backgroundColor = mOn ? '#00aaff' : 'slategray';
                binaryTable.rows[3].cells[i].style.backgroundColor = sOn ? '#00aaff' : 'slategray';
                if (!detailsVisible) {
                    binaryTable.rows[1].cells[i].innerText = hOn ? '1' : '0';
                    binaryTable.rows[2].cells[i].innerText = mOn ? '1' : '0';
                    binaryTable.rows[3].cells[i].innerText = sOn ? '1' : '0';
                    continue;
                }
                binaryTable.rows[1].cells[i].innerText = hOn ? bitValue : '0';
                binaryTable.rows[2].cells[i].innerText = mOn ? bitValue : '0';
                binaryTable.rows[3].cells[i].innerText = sOn ? bitValue : '0';
            }
            binaryTable.rows[1].cells[6].innerText = h;
            binaryTable.rows[2].cells[6].innerText = m;
            binaryTable.rows[3].cells[6].innerText = s;
            if (!pause) {
                const decimalTime = now.toLocaleTimeString();
                decimalHoursInput.value = h;
                decimalMinutesInput.value = m;
                decimalSecondsInput.value = s;
            }
        }
        setInterval(updateBinaryClock, 1000);
        function handleChange() {
            pause = true;
            resetButton.disabled = false;
            customTime.h = parseInt(decimalHoursInput.value);
            customTime.m = parseInt(decimalMinutesInput.value);
            customTime.s = parseInt(decimalSecondsInput.value);
            updateBinaryClock();
        }
        decimalHoursInput.addEventListener('change', handleChange);
        decimalMinutesInput.addEventListener('change', handleChange);
        decimalSecondsInput.addEventListener('change', handleChange);
        resetButton.addEventListener('click', () => {
            pause = false;
            resetButton.disabled = true;
            customTime = { h: 0, m: 0, s: 0 };
            const now = new Date();
            decimalHoursInput.value = now.getHours();
            decimalMinutesInput.value = now.getMinutes();
            decimalSecondsInput.value = now.getSeconds();
        });
    </script>
</body>

</html>